\section{High Level Explanation}
  Conceptually, our protocol is split into three main actions: channel opening,
  payments and closing. A channel $(P_1, P_n)$ between parties $P_1$ and $P_n$
  may be opened directly on-chain, in which case the two parties follow an
  opening procedure similar to that of Lightning, or it can be opened
  on top of a path of preexisting channels $(P_2, P_3), (P_3, P_4), \dots,
  (P_{n-3}, P_{n-2}), (P_{n-2}, P_{n-1})$. In the latter case all parties $P_i$
  on the path follow our novel protocol as discussed below in more detail,
  locking funds in their channels as collateral for the new virtual channel that
  is being opened. Once all intermediaries are committed, $P_1$ and $P_n$
  finally create (and keep off-chain) their funding transaction, following a
  logic similar to Lightning.

  A payment over an established channel follows a procedure heavily inspired by
  Lightning, but without the use of HTLCs. To be completed, a payment needs
  three messages to be exchanged by the two parties.

  Finally, the closing procedure can be completed unilaterally and consists of
  signing and publishing a number of transactions on-chain. As we will discuss
  later, the exact transactions that a party will publish vary depending on the
  exact actions of the other on-path parties. Our protocol can be augmented with
  a more efficient optimistic collaborative closing procedure, which however is
  left as future work.

  In more detail, in order to open a channel (c.f.~\ref{code:ln:open}) the two
  counterparties first create new keypairs and exchange the resulting public
  keys (2 messages), then prepare the underlying base channels if the new
  channel is virtual (\TODO{count messages}), then exchange signatures for their
  respective initial commitment transactions (2 messages) and lastly, if the
  channel is not virtual, the channel funder \TODO{ensure that single-sided
  funding is already mentioned by now} signs and publishes the funding
  transaction on-chain.

  Regarding an off-chain payment (a.k.a. channel update --
  c.f.~\ref{code:ln:pay}), the two channel parties first create the new
  commitment transactions that carry the updated balance and exchange signatures
  for them (2 messages), and afterwards create the revocation transactions that
  spend the commitment transactions of the previous version and exchange their
  signatures (2 messages).

  \TODO{Describe all transactions}
