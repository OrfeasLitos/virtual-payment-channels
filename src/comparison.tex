% TODO: decide whether to merge the two tables, having only 3 parties for BCVC
% and only n parties for the rest
\section{Efficiency Evaluation}
  \label{section:comparison}
  We offer here a comparison of this work with
  LVPC~\cite{10.1007/978-3-030-65411-5_18}, BCVC~\cite{cryptoeprint:2020:554}
  and Donner~\cite{donner} in terms of communication efficiency and on-chain
  footprint (both in size and number of transactions) for all parties when
  opening, updating and non-cooperatively closing a virtual channel. The
  comparison is performed both for channels of length $2$ and for channels of
  length $n$. In the second comparison BCVC is not included, since only LVPC and
  Donner offer a way to open virtual channels of length greater than $2$ (since
  LVPC is recursive and Donner is variadic).

  BCVC proposes $4$ configurations, each with different efficiency
  characteristics: over Generalised Channels~\cite{cryptoeprint:2020:476} (GC)
  or Lightning, and with or without validity (V or NV respectively); we include
  all of them here. We refer the reader to~\cite{cryptoeprint:2020:554} for more
  details.

  As all constructions instantiate virtual channels, opening them does not
  interact with the chain, therefore the on-chain section columns of ``Open''
  are omitted (as they would all be $0$).

  \begin{table*}
    \caption{Efficiency comparison of virtual channel protocols with $3$
    parties}
    \label{table:comparison:overhead:3-parties}
    \begin{minipage}{\textwidth}
    \begin{center}
    \begin{tabular}{|l|c|c|c|c|c|c|c|c|c|c|}
    \hline
              & \multicolumn{2}{|c|}{Open} & \multicolumn{4}{|c|}{Update} &
              \multicolumn{4}{|c|}{Close} \\
    \hline
              & \multicolumn{2}{|c|}{off-chain} & \multicolumn{2}{|c|}{on-chain}
              & \multicolumn{2}{|c|}{off-chain} & \multicolumn{2}{|c|}{on-chain}
              & \multicolumn{2}{|c|}{off-chain} \\
    \hline
              & \#txs & size & \#txs & size & \#txs & size & \#txs & size &
              \#txs & size \\
    \hline
    LVPC       & 1000 & 100000 & 1000 & 100000 & 1000 & 100000 & 1000 & 100000 &
               1000 & 100000 \\
    \hline
    BCVC-GC-NV
              & 1000 & 100000 & 1000 & 100000 & 1000 & 100000 & 1000 & 100000 &
              1000 & 100000 \\
    \hline
    BCVC-GC-V & 1000 & 100000 & 1000 & 100000 & 1000 & 100000 & 1000 & 100000 &
              1000 & 100000 \\
    \hline
    BCVC-LN-NV
              & 1000 & 100000 & 1000 & 100000 & 1000 & 100000 & 1000 & 100000 &
              1000 & 100000 \\
    \hline
    BCVC-LN-V & 1000 & 100000 & 1000 & 100000 & 1000 & 100000 & 1000 & 100000 &
              1000 & 100000 \\
    \hline
    Donner    & 1000 & 100000 & 1000 & 100000 & 1000 & 100000 & 1000 & 100000 &
              1000 & 100000 \\
    \hline
    this work & 1000 & 100000 & 1000 & 100000 & 1000 & 100000 & 1000 & 100000 &
              1000 & 100000 \\
    \hline
    \end{tabular}
    \end{center}
    \end{minipage}
  \end{table*}

  \begin{table*}
    \caption{Efficiency comparison of virtual channel protocols with $n$
    parties}
    \label{table:comparison:overhead:n-parties}
    \begin{minipage}{\textwidth}
    \begin{center}
    \begin{tabular}{|l|c|c|c|c|c|c|c|c|c|c|}
    \hline
              & \multicolumn{2}{|c|}{Open} & \multicolumn{4}{|c|}{Update} &
              \multicolumn{4}{|c|}{Close} \\
    \hline
              & \multicolumn{2}{|c|}{off-chain} & \multicolumn{2}{|c|}{on-chain}
              & \multicolumn{2}{|c|}{off-chain} & \multicolumn{2}{|c|}{on-chain}
              & \multicolumn{2}{|c|}{off-chain} \\
    \hline
              & \#txs & size & \#txs & size & \#txs & size & \#txs & size &
              \#txs & size \\
    \hline
    LVPC      & 1000 & 100000 & 1000 & 100000 & 1000 & 100000 & 1000 & 100000 &
              1000 & 100000 \\
    \hline
    Donner    & 1000 & 100000 & 1000 & 100000 & 1000 & 100000 & 1000 & 100000 &
              1000 & 100000 \\
    \hline
    this work & 1000 & 100000 & 1000 & 100000 & 1000 & 100000 & 1000 & 100000 &
              1000 & 100000 \\
    \hline
    \end{tabular}
    \end{center}
    \end{minipage}
  \end{table*}
