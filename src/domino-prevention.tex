\section{Preventing the Domino attack}
\label{sec:domino-prevention}
A simple modification to Elmo eliminates the channel capacity
reduction under a Domino attack, while also reducing the on-chain
cost of unilateral closing: from each virtual tx, we
eliminate the output that directly
pays a party (e.g., $1$st output of
Fig.~\ref{figure:virtual-layer-extend-interval-simple}) and move its coins into
the funding output of this transaction (e.g., $3$rd
output of Fig.~\ref{figure:virtual-layer-extend-interval-simple}). We further
ensure at the protocol level that the base party that owns these coins never
allows its channel balance to fall below the collateral, until the supported
virtual channel closes. This change ensures that the collateral
automatically becomes available to use in the base channel after the virtual one
closes, keeping more funds off-chain after a Domino attack. This approach
however has the drawback that, depending on which of the two parties first
spends the funding output (with a virtual tx), the funds allocation in the
channel differs. Base parties thus would have to maintain two sets of commitment
and revocation txs, one for each case. Since this overhead encumbers the
optimistic, cooperative case and only confers advantages in the pessimistic
case, we choose not to adopt this approach into our design.

