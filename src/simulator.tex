\begin{figure}[H]
  \begin{simulatorbox}{\simulator}
    \begin{algorithmic}[1]
      \State On (\textsc{open}, $F$) by \fchan:
      \Indent
        \State TODO: how to trick \environment? We don't have $sk$...
      \EndIndent
      \Statex

      \State On (\textsc{pay}, $x$, \dave) by \fchan:
      \Indent
        \State simulate receiving (\textsc{pay}, $x$) with \dave
        \State ensure simulated \dave outputs \textsc{ok}
        \State send \textsc{ok} to \fchan
      \EndIndent
      \Statex

      \State On (\textsc{fund you}, $c$, \bob, \charlie, \alice) by \fchan:
      \Indent
        \State simulate \alice receiving input (\textsc{fund you}, $c$, \bob) by
        \charlie
        \State ensure simulated \alice outputs \textsc{ok} to \charlie
        \State send \textsc{ok} to \fchan
      \EndIndent
    \end{algorithmic}
  \end{simulatorbox}
  \caption{}
  \label{code:simulator}
\end{figure}
